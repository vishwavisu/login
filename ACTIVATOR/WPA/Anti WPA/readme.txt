AntiWPA 3.3 for x64 and x86
===========================

How to use:
	Start AntiWPA3.cmd to install/uninstall the patch

What is does the patch modifies:
	* HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon\Notify\AntiWPA
	  is added to Registry
	  
	* File C:\windows\system32\AntiWPA.dll is added

	
 	* HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\WPAEvents] 
 	  data for "OOBETimer" is changed {=OOBE}

 	* rundll32 setupapi,InstallHinfSection DEL_OOBE_ACTIVATE 132 syssetup.inf
 	  rundll32 setupapi,InstallHinfSection RESTORE_OOBE_ACTIVATE 132 syssetup.inf
 	  is executed which will remove/restore WPA-links from the startmenu


How does it works:

It cheats (hooks user32.dll! GetSystemMetrics(SM_CLEANBOOT) & ntdll.dll!NtLockProductActivation)
winlogon.exe to make it believe it was booted in safemode and so winlogon skips
the WPA-Check. (Note:  Does not affects system calls by other exe or dll.)
The patch is 'autorun' on eachs start before the WPA-check via
HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon\Notify\AntiWPA

The hooks are applied when AntiWPA.dll!onLogon was load by winlogon.exe
Winlogon.exe is not altered anymore. Patching (API-Hooking) is done in Memory.
So there are no problems with the windows System File Protection anymore.

Installation is performed via AntiWPA.dll!DllRegisterServer ("regsvr32 AntiWPA.dll").
The file is copied to systemdir and the registrykeys are added.
(Note: AntiWPA.dll is no ActiveX selfregisterdll.)
Uninstallation is done via AntiWPA.dll!DllUnRegisterServer ("regsvr32 -u AntiWPA.dll").



==================================================
   F A Q  - Frequently Asked Questions
==================================================


????????????????????????????????????????????????????????????????????????????????
	How to check if it's really active
????????????????????????????????????????????????????????????????????????????????
check if antiwpa.dll is loaded 
enter in console 
TASKLIST /M /FI "MODULES eq antiwpa.dll" 
and check if you get the Process Winlogon.exe as output


????????????????????????????????????????????????????????????????????????????????
	I have Install AntiWPA 2.00 shall I uninstall it and update?
????????????????????????????????????????????????????????????????????????????????
They both work well. They both ‘target’ the same function in 
Winlogon.exe. So it’s running well - don’t touch it (Never touch a running system.)


????????????????????????????????????????????????????????????????????????????????
	Do I have to reinstall every AntiWPA 3 after I've installed an servicepack ?
????????????????????????????????????????????????????????????????????????????????
No you don't need. The patch isn’t undo by service packs anymore.
Since it doesn't modify winlogon.exe it's no problem if winlogon.exe is 
replace by a new version.


????????????????????????????????????????????????????????????????????????????????
	What is the difference between AntiWPA 2 & AntiWPA 3?
????????????????????????????????????????????????????????????????????????????????
AntiWPA 2 directly modified winlogon.exe (on hard disk) to make it skip 
over the product activation check.
AntiWPA 3 intercepts (API-Hooking) the request of winlogon.exe to the OS (in memory).
If Windows was booted in safeMode and returns always yes and winlogon.exe
skips the product activation check.



????????????????????????????????????????????????????????????????????????????????
	How to integrate it into Windows Setup?
????????????????????????????????????????????????????????????????????????????????
I have done/tried this yet.
Well you have to manage these tasks somehow:
1.	Add antiwpa.dll to the installation package
2.	make it execute once "regsvr32 /s antiwpa.dll"
(or "rundll32 antiwpa.dll, DllRegisterServer")



????????????????????????????????????????????????????????????????????????????????
	The let's activated dialog still says it needs to activate.
	[obsoluted since oobe-fix is included]
????????????????????????????????????????????????????????????????????????????????
Don't worry about - as long as the days are not 
decreasing(=not so critical) and you a message pops up during 
login saying 'you need to activated in x days' (=very bad)

However if you feel better apply 'Set-OOBE-Activated.zip'




AntiWPA.dll hookdll implementation by HLT
Specifications & install script by CW2K

http:\\AntiWPA3.tk

<CW2K>			

---------------------------------------------------------------
History:

3.3	Install/Uninstall routine for OOBE-Fix and remove activate-links added to AntiWPA.dll

3.2 	Internal version (Not released)

3.1  Install/Uninstall routine via regsvr32 added to AntiWPA.dll
	  Version info added to AntiWPA.dll
			  
3.0 BETA	  initial Release
